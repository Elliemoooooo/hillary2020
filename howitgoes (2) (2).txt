campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 21,
        "fields": {
            "year": 2020,
            "summary": "<div style='overflow-y:scroll;height:200px;'> Fatigue, chaos, and isolation are the defining characteristics of the 2020 election. Haunted by lingering questions as Americans take one long look in the mirror and do not like what they see. They look at their choices for president and are not impressed. Trump’s gilded nostalgia vs. Castro’s vision of aesthetic change and renewed unity. The pandemic has altered how many people interact with each other. The protests have made it impossible to look away from the carnage. The economic strain has left voters at their wits' end.</p>\n\n<ul>\n<li>Donald Trump, ever defiant, ignores the warning signs and provides red meat to his loyal base with his bombastic, carnival-style rallies, frothing at the mouth about law & order, promising a triumphant recovery, and dismissing critics as enemies of the nation. For four years he’s taken a blowtorch to a wide array of issues, with grandiose bombasticity and fleeting concentration. Covid-19 provided the administration with an opportunity to define itself beyond the endless cacophony of noise and misery.\n\n\n\n</li>\n\n\n\n<li>Clinton, meanwhile, embodies — or at least attempts to embody — the hope of a younger, more diverse generation. At 46 years of age, his message of compassion, reform, and inclusion strikes a chord with young Americans begging for any reason not to check out of politics.</li></ul>\n\n\nAs November nears, the air around Washington thickens. Both men are captured by their own ambition and belief that only they can rescue the nation from the depths of despair it wallows in. Will sanity be restored, or will the self-styled king, the 45th president, reign supreme once more?</p></div>",
            "image_url": "https://files.catbox.moe/b35d7c.png",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://files.catbox.moe/19eu00.png",
            "recommended_reading": "<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "creator": "ElectoralUK",
            "display_year": "2020"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 300,
        "fields": {
            "first_name": "Hillary",
            "last_name": "Clinton",
            "election": 21,
            "party": "Democratic",
            "state": "New York",
            "priority": 1,
            "description": "Hillary Clinton would enter the race as a well known and deeply experienced presidential candidate. Her years as First Lady Senator and Secretary of State give her a level of familiarity and preparation that few rivals can match. Supporters see her as steady capable and ready to handle complex national challenges from the first day.</p>\n\nStill her long history in public life cuts both ways. Some voters feel weighed down by past political fights and worry that her candidacy could reopen old tensions. Others question whether she can inspire enthusiasm among younger or more progressive voters. While her experience is unmatched her ability to reshape the political landscape remains a point of debate.",
            "color_hex": "#3C5A8B",
            "secondary_color_hex": "#4A77BF",
            "is_active": 1,
            "image_url": "https://files.catbox.moe/u7sj51.png",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2020 election.</h3><p>Things may have been closer and more contested than you hoped for, but the final result remains. Can you help bring the country back together after a tumultuous few years? Or will you be seen as a lame duck from the first day -- unable to keep the two wings of your party coordinated? Time will tell.</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2020 election.</h3><p>After an election in which many of your supporters claimed democracy itself was at stake, what happens now? Perhaps the party will need to go in a completely different direction in 2024. As for yourself, it seems that your long, illustrious political career has surely drawn to a close.</p>",
            "no_electoral_majority_message": "<h3>Sorry! You have lost the 2020 election.</h3><p>In spite of the 269-269 tie in the electoral college, Republicans control a majority of state delegations in the House of Representatives. After an election in which many of your supporters claimed democracy itself was at stake, what happens now? Perhaps the party will need to go in a completely different direction in 2024.</p>",
            "description_as_running_mate": "",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 301,
        "fields": {
            "first_name": "Donald",
            "last_name": "Trump",
            "election": 21,
            "party": "Republican",
            "state": "Florida",
            "priority": 2,
            "description": "<p>President Donald Trump enters the campaign with the advantages of incumbency, yet seems to be the underdog for a second time. Can Trump piece together a winning coalition again, and will it be the same one that got him over the finish line in 2016? The pandemic and Black Lives Matter movement only serve to complicate his task even further.</p>",
            "color_hex": "#A63F49",
            "secondary_color_hex": "#D34553",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/donald-trump-2020.jpg",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2020 election.</h3><p>For the second time in a row, many analysts saw a victory for you as practically impossible. But whatever they say, it is clear that your Make America Great Again agenda has been vindicated. Where do you take things from here?</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2020 election.</h3><p>After an election in which many of your supporters claimed democracy itself was at stake, what happens now? Many analysts believe the party will need to go in a completely different direction next time. As for yourself, will you take these results sitting down, or will you prepare yourself for an epic political comeback in 2024?</p>",
            "no_electoral_majority_message": "<h3>Congratulations! You have won the 2020 election.</h3><p>In spite of the 269-269 tie in the electoral college, Republicans control a majority of state delegations in the House of Representatives. A lot of liberals are absolutely distraught and outraged that the election came down to such a technicality, but hey, those are the rules!</p>",
            "description_as_running_mate": "",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 302,
        "fields": {
            "first_name": "Jo",
            "last_name": "Jorgensen",
            "election": 21,
            "party": "Libertarian",
            "state": "South Carolina",
            "priority": 3,
            "description": "'",
            "color_hex": "#C0BD5D",
            "secondary_color_hex": "#E1DE96",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 303,
        "fields": {
            "first_name": "Kanye",
            "last_name": "West/Other",
            "election": 21,
            "party": "Independent",
            "state": "Georgia",
            "priority": 4,
            "description": "'",
            "color_hex": "#4A3564",
            "secondary_color_hex": "#9282A6",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 304,
        "fields": {
            "first_name": "Tim",
            "last_name": "Kaine",
            "election": 21,
            "party": "Democratic",
            "state": "Virginia",
            "priority": 5,
            "description": "'",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://files.catbox.moe/pnduwp.png",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Kamala Harris is a Senator from California who made her own run for President in 2020. She would be acceptable to moderates and financial supporters, has some appeal to progressives, and brings diversity to the ticket. She's not the preferred choice of most progressives.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 305,
        "fields": {
            "first_name": "Susan",
            "last_name": "Rice",
            "election": 21,
            "party": "Democratic",
            "state": "Washington DC",
            "priority": 6,
            "description": "'",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/susan-rice-2020.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Susan Rice was a UN Ambassador and a National Security Advisor to Barack Obama, and brings decades of foreign policy experience. She would be a true center-left pick, but has never run for elected office. Her foreign policy record would also be a turnoff to progressives.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 306,
        "fields": {
            "first_name": "Karen",
            "last_name": "Bass",
            "election": 21,
            "party": "Democratic",
            "state": "California",
            "priority": 7,
            "description": "'",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/karen-bass-2020.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Karen Bass is a Congresswoman from California and Chair of the Congressional Black Caucus. She has taken more progressive policy stances (including support for Medicare For All) than some of the other candidates, with the attendant supporters and detractors.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 307,
        "fields": {
            "first_name": "Gretchen",
            "last_name": "Whitmer",
            "election": 21,
            "party": "Democratic",
            "state": "Michigan",
            "priority": 8,
            "description": "'",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/gretchen-whitmer-2020.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Gretchen Whitmer is the Governor of Michigan who could bring some undecideds over the line in that state and region. She is seen as a mainstream Democrat with solid experience. Choosing her would anger some supporters who expect an African-American running-mate after this summer's protests.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 308,
        "fields": {
            "first_name": "Elizabeth",
            "last_name": "Warren",
            "election": 21,
            "party": "Democratic",
            "state": "Massachusetts",
            "priority": 9,
            "description": "'",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/elizabeth-warren-2020.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Elizabeth Warren is a Senator from Massachusetts who made a serious run at the Democratic Nomination in 2020. She is generally seen as a solid progressive with a particular interest in financial reform and regulation. Choosing her would anger some supporters who expect an African-American running-mate after this summer's protests.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 309,
        "fields": {
            "first_name": "Mike",
            "last_name": "Pence",
            "election": 21,
            "party": "Republican",
            "state": "Indiana",
            "priority": 10,
            "description": "'",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/mike-pence-2020.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Mike Pence has served as your Vice President for the past four years, sticking to all of your talking points and staying out of the limelight. Most feel he should be rewarded for this loyalty with another turn on the top of the ticket. He also helps shore up your support with social conservatives.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 310,
        "fields": {
            "first_name": "Nikki",
            "last_name": "Haley",
            "election": 21,
            "party": "Republican",
            "state": "South Carolina",
            "priority": 11,
            "description": "'",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/nikki-haley-2020.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Nikki Haley has served as the Governor of South Carolina, and as a UN Ambassador. She could help you moderate your image and try to close the female vote. Choosing her would probably lead to hard feelings between yourself and Pence, but would your voters care?</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 311,
        "fields": {
            "first_name": "Spike",
            "last_name": "Cohen",
            "election": 21,
            "party": "Libertarian",
            "state": "Maryland",
            "priority": 12,
            "description": "'",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 312,
        "fields": {
            "first_name": "Angela",
            "last_name": "Walker",
            "election": 21,
            "party": "Green",
            "state": "Wisconsin",
            "priority": 13,
            "description": "'",
            "color_hex": "#00C100",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 0,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 313,
        "fields": {
            "first_name": "Val",
            "last_name": "Demings",
            "election": 21,
            "party": "Democratic",
            "state": "Florida",
            "priority": 14,
            "description": " ",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/val-demings-2020.jpg",
            "electoral_victory_message": " ",
            "electoral_loss_message": " ",
            "no_electoral_majority_message": " ",
            "description_as_running_mate": "<p>Val Demings is a Congresswoman and former police chief from Florida. She could allow Biden to select a black running mate with more moderate credentials than some of the other choices. However, she has had a limited national profile and may be a disappointment to the more progressive wing of the party.<p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 314,
        "fields": {
            "first_name": "Tammy",
            "last_name": "Duckworth",
            "election": 21,
            "party": "Democratic",
            "state": "Illinois",
            "priority": 15,
            "description": " ",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/tammy-duckworth-2020.jpg",
            "electoral_victory_message": " ",
            "electoral_loss_message": " ",
            "no_electoral_majority_message": " ",
            "description_as_running_mate": "<p>Tammy Duckworth is a Senator from Illinois who served in Iraq and has been active in foreign policy issues. She could help in the Midwest, but was also born in Thailand (as a U.S. citizen) and will need to deflect questions about her eligibility. Additionally, many party activists are expecting an African-American to be selected as well.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 200,
        "fields": {
            "candidate": 300,
            "running_mate": 304
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 201,
        "fields": {
            "candidate": 300,
            "running_mate": 305
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 210,
        "fields": {
            "candidate": 300,
            "running_mate": 314
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 209,
        "fields": {
            "candidate": 300,
            "running_mate": 313
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 202,
        "fields": {
            "candidate": 300,
            "running_mate": 306
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 203,
        "fields": {
            "candidate": 300,
            "running_mate": 307
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 204,
        "fields": {
            "candidate": 300,
            "running_mate": 308
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 205,
        "fields": {
            "candidate": 301,
            "running_mate": 309
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 206,
        "fields": {
            "candidate": 301,
            "running_mate": 310
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 207,
        "fields": {
            "candidate": 302,
            "running_mate": 311
        }
    }
]

campaignTrail_temp.credits = "Dan Bryan"

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 21,
        "candidates": [
            300,
            301,
            302,
            303,
            312
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 21,
        "candidates": [
            300,
            301,
            302,
            303,
            312
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 21,
        "year": 2020,
        "is_premium": 0,
        "display_year": "2020"
    }
]

jet_data = {
    "headerColor": "#ffffff",
    "windowColor": "#e6ecf0",
    "containerColor": "#ffffff",
    "innerWindowColor": "#e6ecf0",
    "bannerImageUrl": "https://files.catbox.moe/b4pa7k.png",
    "backgroundImageUrl": "https://files.catbox.moe/7s2d0t.png",
    "endingTextColor": "#000000",
    "customQuote": ""
}

//#startcode



nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#ffffff";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#e6ecf0";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#ffffff";

document.getElementById("header").src = "https://files.catbox.moe/b4pa7k.png";

document.body.background = "https://files.catbox.moe/7s2d0t.png";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#e6ecf0!important;}</style>";

$("#game_window")[0].style.backgroundImage = "url(https://files.catbox.moe/up8ih9.png)"

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#637db0;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";


    audio.volume = 1;
    volumeSlider.value = 1;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#637db0;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
  0: {
    name: "Soundtrack",
    tracklist: [
{
        "name": "ElyOtto - SUGARCRASH!",
        "url": "https://audio.jukehost.co.uk/dwIhc8BTKkAkEFlNdishgxTQFp2w7hP8"
      },
      {
        "name": "Claire Rosinkranz - Backyard Boy",
        "url": "https://audio.jukehost.co.uk/eoIUyce7mKI9tkHfdTOhUacn4THTpVL5"
      },
      {
        "name": "Powfu - Death Bed",
        "url": "https://audio.jukehost.co.uk/uklNR6tIvIFbKAkZeuLqo3GtsTUgD4r0"
      },
      {
        "name": "BENEE - Supalonely",
        "url": "https://audio.jukehost.co.uk/oK4WjfziZDAuotJSgunVbdxzjfjLk6e1"
      },
      {
        "name": "Pop Smoke - What You Know Bout Love",
        "url": "https://audio.jukehost.co.uk/Efmz7UZFB7jGNeGFceaiXehPyNID6QcY"
      },
      {
        "name": "Internet Money ft. Don Toliver, Gunna & NAV - Lemonade",
        "url": "https://audio.jukehost.co.uk/5fd9XrAg1M9BfdMfk86dPtMfMNClg7Pl"
      },
      {
        "name": "The Weeknd - Blinding Lights",
        "url": "https://audio.jukehost.co.uk/WFHWuIEfzpQyBacOmU8i3gFfYDBsYLT5"
      },
      {
        "name": "Tessa Netting - The 2020 Song",
        "url": "https://audio.jukehost.co.uk/EgXqzoMVGqkJSqcxWA9La6RP2YCxMSI5"
      }
    ]
  }
}

// Set up new music player

newMusicPlayer()


const style_overwrite = document.createElement("style");
style_overwrite.innerHTML = `
/* --- Remove gray box around player --- */
#trackSelParent, #trackSel {
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* --- Inner tracker box --- */
#trackSelParent > div {
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* --- Track list hover effect --- */
#trackSel label:hover {
  background-color: #e8f5fe !important; /* keep hover effect if desired */
  border-radius: 4px;
}

/* --- Slider colors --- */
#time-slider, #volume-slider {
  accent-color: #1d9bf0 !important;
}

/* --- Pause/Play button --- */
#trackSelParent button {
  background-color: #1d9bf0 !important;
  border: none !important;
  color: white !important;
  border-radius: 999px !important;
  padding: 8px 0 !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: background-color 0.2s ease;
}

#trackSelParent button:hover {
  background-color: #198cd8 !important;
}
.campaign_trail_start_emphasis {
  background-color: #1DA1F2; /* Twitter red */
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: bold;
}

button {
  background-color: #ffffff;          /* plain white */
  border: 1px solid #e1e8ed;         /* subtle Twitter-gray border */
  color: #14171a;                     /* dark Twitter text */
  font: 14px "Helvetica Neue", Helvetica, Arial, sans-serif;
  padding: 6px 12px;
  border-radius: 6px;                 /* slightly rounded corners */
  cursor: pointer;
  transition: background-color 0.15s ease, border-color 0.15s ease;
}

button:hover {
  background-color: #f5f8fa;          /* light gray hover */
  border-color: #aab8c2;              /* slightly darker border */
}

button:active {
  background-color: #e6ecf0;          /* darker gray when pressed */
  border-color: #8899a6;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
}

select {
  background-color: #ffffff;           /* white background */
  border: 1px solid #e1e8ed;          /* subtle gray border */
  border-radius: 6px;
  padding: 4px 8px;
  color: #14171a;
  font: 14px "Helvetica Neue", Helvetica, Arial, sans-serif;
  cursor: pointer;
  transition: border-color 0.15s ease, background-color 0.15s ease;
}

select:hover {
  border-color: #aab8c2;              /* subtle hover effect */
  background-color: #f5f8fa;
}

button:active {
  background-color: #1681c2;        /* pressed effect */
  border-color: #1681c2;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
}

select {
  background-color: #ffffff;         /* white background */
  border: 1px solid #e1e8ed;        /* subtle gray border */
  border-radius: 6px;
  padding: 4px 8px;
  color: #14171a;
  font: 14px "Helvetica Neue", Helvetica, Arial, sans-serif;
  cursor: pointer;
  transition: border-color 0.15s ease, background-color 0.15s ease;
}

select:hover {
  border-color: #aab8c2;
  background-color: #f5f8fa;
}
.inner_window_question {
  height: auto;           /* automatically adjusts to content */
  max-height: none;       /* no maximum height restriction */
  overflow: visible;      /* show all overflowing content */
}
`;
document.head.appendChild(style_overwrite);

const gameThemes = {
  "Light Mode": function () {
    // Set theme colors
    nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#ffffff";
    nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#e6ecf0";

    // Apply header and window colors
    const gameWindow = $("#game_window")[0];
    document.getElementsByClassName("game_header")[0].style.backgroundColor =
      nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;
    gameWindow.style.backgroundColor =
      nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;
    gameWindow.style.borderColor = "#c9c9c9";
    $(".container")[0].style.backgroundColor = "#ffffff";

    // Header and background images
    document.getElementById("header").src = "https://files.catbox.moe/b4pa7k.png";
    document.body.background = "https://files.catbox.moe/7s2d0t.png";
    $(".footer")[0].style.color = "#000";

    // Game window texture overlay
    $("#game_window")[0].style.backgroundImage = "url(https://files.catbox.moe/up8ih9.png)";

    // Remove old injected styles
    document.querySelectorAll("style[data-theme-style]").forEach(e => e.remove());

    // Inject new styles for Light Mode
    const style = document.createElement("style");
    style.setAttribute("data-theme-style", "true");
    style.innerHTML = `
      #results_container { color:#000000; }
      .inner_window_w_desc { background-color:#e6ecf0!important; }
      #final_results_description h3,
      #overall_details_container h3,
      #overall_election_details h4,
      #main_content_area_reading p,
      #main_content_area_reading h3.results_tab_header,
      .inner_window_w_desc h3,
      .overlay_window h3,
      p#credits {
        color: black;
      }
    `;
    document.head.appendChild(style);
  },

  "Dark Mode": function () {
    document.getElementById("header").src = "https://files.catbox.moe/b4pa7k.png";
    document.body.style.backgroundColor = "#1a1a1a";
    document.body.background = "https://files.catbox.moe/169az4.png";
    $(".container")[0].style.backgroundColor = "#222";

    $(".game_header")[0].style.backgroundColor = "#333";
    const gameWindow = $("#game_window")[0];
    $("#game_window")[0].style.backgroundImage = "url(https://files.catbox.moe/c67ifi.png)";
    gameWindow.style.borderColor = "#444";

    nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#000000";
    nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#303030";
    $(".footer")[0].style.color = "#fff";

    // Remove old injected styles
    document.querySelectorAll("style[data-theme-style]").forEach(e => e.remove());

    // Inject new styles for Dark Mode
    const style = document.createElement("style");
    style.setAttribute("data-theme-style", "true");
    style.innerHTML = `
      #results_container { color:#000000; }
      .inner_window_w_desc { background-color:#363636!important; }
      #final_results_description h3,
      #overall_details_container h3,
      #overall_election_details h4,
      #main_content_area_reading p,
      #main_content_area_reading h3.results_tab_header,
      .inner_window_w_desc h3,
      .overlay_window h3,
      p#credits {
        color: white;
      }
    `;
    document.head.appendChild(style);
  }
};

// ======== Theme Picker ========
const themePicker = document.getElementById("themePicker");
const newThemePicker = document.createElement("select");
newThemePicker.id = "themePicker";
newThemePicker.addEventListener("change", gameThemePicked);

let newInnerHTML = "";
for (let theme in gameThemes) {
  newInnerHTML += `<option value="${theme}">${theme}</option>`;
}
newThemePicker.innerHTML = newInnerHTML;
themePicker.replaceWith(newThemePicker);

function gameThemePicked() {
  gameThemes[newThemePicker.value]();
}

// Set default theme
gameThemePicked();

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 21,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]


//#endcode
